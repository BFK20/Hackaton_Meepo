{% extends 'lifecourse/base.html' %}

{% block title %}
{{ title }}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#department-select').change(function() {
                var departmentId = $(this).val();
                $.ajax({
                    url: '/departments/' + departmentId + '/groups/',
                    success: function(data) {
                        $('#group-list').html(data);
                    }
                });
            });
        });
        $(document).ready(function() {
            $('#add-group-form').submit(function(event) {
                event.preventDefault();
                var formData = $(this).serialize();
                $.ajax({
                    type: 'POST',
                    url: '/add_group/',
                    data: formData,
                    success: function(data) {
                        alert('Group added successfully!');
                    }
                });
            });
        });
    </script>
{% endblock %}

{% block content %}
    <h1>Department and Group Selection</h1>
    <select id="department-select">
        <option value="">Select Department</option>
        <!-- Populate this select box with department options -->
    </select>
    <div id="group-list">
        <!-- Group list will be displayed here -->
    </div>

    <form id="add-group-form">
        <label for="group-name">Group Name:</label>
        <input type="text" id="group-name" name="name" required>
        <label for="department-id">Department ID:</label>
        <input type="text" id="department-id" name="department_id" required>
        <button type="submit">Add Group</button>
    </form>
{% endblock %}